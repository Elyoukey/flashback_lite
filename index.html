<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <meta name="theme-color" content="#fafafa">

  <style>
    .splash{
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      text-align: center;
      background: #f1f1f1;
      z-index: 10;
      opacity: 1;
      visibility: visible;
      transition: opacity 500ms linear;
    }

    .splash.fadded{
      opacity: 0;
      visibility: hidden;
      transition: visibility 0s 500ms, opacity 500ms linear;
    }

    #container{
      margin: 0 ;
      padding: 10px;
      width: 100%;
      position: relative;
      box-sizing: border-box;
    }

    .left-menu{
      position: fixed;
      left:0;
      top:0;
      background: rgba( 0,0,0,0.6);

      width: 100%;

      box-sizing: border-box;

      white-space: nowrap;
      text-align: center;
      z-index: 5;

      overflow-y: scroll;
    }

    .left-menu .menu-item{
      border: 2px dashed silver;
      border-radius: 20px;
      margin: 10px 10px;
      display: inline-block;
      overflow: hidden;
      text-align: center;
      width: 60px;
      height: 40px;

      pointer-events: none;
    }

    .left-menu .menu-item.active.selected {
      border: 2px solid #fdf610;
    }
    .left-menu .menu-item.active{
      border: 2px solid black;
      pointer-events: all;
    }

    .left-menu .menu-item img{
      height: 50px;
      opacity: 0;
    }

    .left-menu .menu-item.active img{
      opacity: 1
    }

    #canvas{
      overflow: hidden;
      width: 100%;
      max-width: 1500px;


      top: 0px;
      left: 0;

      border-radius: 10px;
      border: 5px solid #a4e0a4;
      box-sizing: border-box;
      position: relative;
      margin: 100px auto;
      z-index:1;
    }

    #canvas .background-img{
      position: relative;
      top:0;
      left: 0;
      opacity: 0;
      z-index: 0;
      width: 100%;
    }

    #canvas .puzzlepiece{
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      z-index: 0;
      width: 100%;
      height: 100%;
      background: #b3d4fc;
    }

    #canvas .puzzlepiece .image{
      width: 100%;
    }


    #canvas .puzzlepiece:target,
    #canvas .puzzlepiece.first-selected
    {
      opacity: 1;
      z-index: 1;
    }

    #canvas .puzzlepiece .hiddenbutton{
      cursor: default;
    }

    #card1-doghead{
      background: chocolate;
      opacity: 0;


    }

    #hint-doghead.hint{

      background: url("img/game/hand.png");
      background-size: cover;

      animation-name: hint;
      animation-duration: 1400ms ;
      animation-delay: 20s;
      animation-iteration-count: infinite;
      animation-timing-function: ease-out;

      opacity: 0;
    }

    @keyframes hint {
      0%{
        opacity:1;
        margin-top:-3.5%;
        margin-left: 3.5%;
      }
      25%{
        opacity:1;
        margin-top: 0;
        margin-left: 0;
      }
      50%{
        opacity:1;
        margin-top:-3.5%;
        margin-left: 3.5%;
      }
      75%{
        opacity:1;
        margin-top: 0;
        margin-left: 0;
      }
      100%{
        opacity:1;
        margin-top:-3.5%;
        margin-left: 3.5%;
      }
    }

    #canvas #question-list{
      width:100%;
      height: 100%;
      background: #b3d4fc;
      text-align: center;
    }

    #canvas #question-list .question{
      border: 5px solid grey;
      border-radius: 20px;
      width: 25%;
      height: 20%;
      overflow: hidden;
      margin-top: 5%;
    }

    #canvas #question-list #question1{ margin-left: 5%; }
    #canvas #question-list #question2{ margin-left: 40%; }
    #canvas #question-list #question3{ margin-left: 70%; }

    #canvas #question-list .question .card{
      opacity: 0;
      background: white;
      width: 200px;
      height: 150px;
    }
    #canvas #question-list .question.active .card{
      opacity: 1;
      transition: opacity 1s ease-out;
    }

    #canvas .commands{ display: none;
      position: absolute;
      top: 60px;
      left: 10px;
      opacity: 0.7;
      z-index: 50;
    }

    #canvas .commands .control{
      border-radius: 5px;
      background: #222222;
      color: white;
      font-weight: bold;
      font-size: 2em;
      text-decoration: none;
      opacity: 0.7;
      width: 42px;
      height: 42px;
      line-height: 38px;
      display: block;
      text-align: center;
      margin: 7px;
    }


    .zoom-level-0{
      transform: scale(1);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-1{
      transform: scale(1.25);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-2{
      transform: scale(1.5);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-3{
      transform: scale(1.75);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-4{
      transform: scale(2);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-5{
      transform: scale(2.25);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-6{
      transform: scale(2.5);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-7{
      transform: scale(2.75);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-8{
      transform: scale(3);
      transform-origin: 50% 50% 0px;
      transition: transform 0.2s;
    }
    .zoom-level-9{
      transform: scale(3.25);
      transform-origin: 50% 50% 0px;
    }
  </style>
</head>

<body>
<div id="splash-1" class="splash">
  <p>
    <i>Welcome Flavor text 1 </i>
  </p>
  <button onclick="$('splash-1').classList.add('fadded');">
    Commencer
  </button>
</div>
<div id="splash-2" class="splash fadded">
  <p>
    <i>Well done flavor text2 </i>
  </p>
</div>

<div id="container">

  <div class="left-menu" id="left-menu">
    <a class="menu-item active selected" id="menu1" href="#card1">
      <img src="img/game/p-01color.jpg" alt="First card" >
    </a>
    <a class="menu-item" id="menu-card2" href="#card2" >
      <img src="img/game/p-02color.jpg" alt="Secund card">
    </a>
    <a class="menu-item" id="menu3" href="#card3">
      <img src="img/game/p-03color.jpg" alt="Third card">
    </a>
    <a class="menu-item"  id="menu4" href="#card4">
      <img src="img/game/p-04color.jpg" alt="Fourth card">
    </a>
    <a class="menu-item" id="menu5" href="#card5">
      <img src="img/game/p-05color.jpg" alt="Fifth card">
    </a>
    <a class="menu-item" id="menu6" href="#card6">
      <img src="img/game/p-06color.jpg" alt="Sixth card">
    </a>
    <a class="menu-item" id="menu7" href="#card7">
      <img src="img/game/p-07color.jpg" alt="Seventh card">
    </a>
    <a class="menu-item" id="menu8" href="#question-list">
      ? ? ?
    </a>
  </div>

  <div id="canvas">

    <img src="img/game/p-01color.jpg" id="background-img"  class="image background-img" />

    <div class="puzzlepiece first-selected" id="card1" data-scale="0" >
      <img src="img/game/p-01color.jpg" class="image" />
      <a id="card1-doghead" class="hiddenbutton" href="#card2" style="position: absolute; left:30%; top:57%; width:7%;height:10%; "> </a>
      <div id="hint-doghead" class="hint" style="position: absolute; left:32%; top:43%; width:15%;height:17%; "> </div>
      <a id="card1-retro" class="hiddenbutton" href="#card3" style=" position: absolute; left: 65%; top: 12%; width: 31%; height:24%;  transform: rotate(-30deg)"> </a>
    </div>
    <div class="puzzlepiece " id="card2" data-scale="0" >
      <img src="img/game/p-02color.jpg" class="image" />
      <a id="card2-zombie" class="hiddenbutton" href="#card4" style="position: absolute; left: 21%; top:50%; width:5%;height:11%; "> </a>
      <a id="card2-question1" class="hiddenbutton" href="#question-list" style="position: absolute; left: 78%; top:80%; width: 17%;height:15%; "> </a>
    </div>
    <div class="puzzlepiece " id="card3" data-scale="0" >
      <img src="img/game/p-03color.jpg"  class="image" />
      <a id="card3-visiere" class="hiddenbutton" href="#card5" style="position: absolute; left: 44%; top: 58%; width: 12%; height:5%; "> </a>
    </div>
    <div class="puzzlepiece " id="card4" data-scale="0" >
      <img src="img/game/p-04color.jpg" class="image" />
    </div>
    <div class="puzzlepiece " id="card5" data-scale="0" >
      <img src="img/game/p-05color.jpg" class="image" />
      <a id="card5-head" class="hiddenbutton" href="#card6" style="position: absolute; left: 32%; top: 50%; width:5%; height:7%; "> </a>
    </div>
    <div class="puzzlepiece " id="card6" data-scale="0" >
      <img src="img/game/p-06color.jpg" class="image" />
      <a id="card6-clown" class="hiddenbutton" href="#card7" style="position: absolute; left: 45%; top: 87%; width: 16%; height: 10%; "> </a>
    </div>
    <div class="puzzlepiece " id="card7" data-scale="0" >
      <img src="img/game/p-07color.jpg" class="image" />
      <a id="card7-doghead" class="hiddenbutton" href="#question-list" style="position: absolute; left:0; top:0; width:20%;height:20%; "> </a>
    </div>
    <div id="question-list" class="puzzlepiece" data-targeter="menu8">
      <div class="question" id="question1">
        <div class="card">Question 1 ?</div>
      </div>
      <div class="question" id="question2">
        <div class="card">Question 2 ?</div>
      </div>
      <div class="question" id="question3">
        <div class="card">Question 3 ?</div>
      </div>
      <button onclick="$('splash-2').classList.remove('fadded');">
        Fin du jeu!
      </button>
    </div>
  </div>

</div>

  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>

  <script>
      /* ------------------------------------------------------Utilities */
      function $(id){ return document.getElementById(id);}
      function $_(q){ return document.querySelector(q);}
      function $_s(q){ return document.querySelectorAll(q);}

      /* --------------------------------------------------- Variables */
      var lastPosX = 0; // for image dragging
      var lastPosY = 0; // for image dragging
      var isDragging = false; // for image dragging
      var isPinching = false; // for image dragging

      /* ----------------------------------------------------- Dom elements */
      var $puzzlepieces;
      var $hiddenbuttons;
      var $menupieces;
      var $canvas;

      /* ----------------------------------------------------- DOM load */
      document.addEventListener("DOMContentLoaded", function() {

        // initiate dom elements
        $menupieces = $_s('#left-menu .menu-item');
        $puzzlepieces = $_s('#canvas .puzzlepiece');
        $hiddenbuttons = $_s('#canvas .puzzlepiece .hiddenbutton');
        $canvas = $('canvas');

        // redirect to card 1 if current #card is not active
        let hash = window.location.hash;
        if(hash){
          if ( ! $_(hash).classList.contains('active')){
            window.location = window.location.href.replace(window.location.hash,"");
          }
        }

        // menu selection
        for( let i=0 ; i< $menupieces.length; i++){
          $menupieces[i].addEventListener('click',function(e){
            for( let i=0 ; i< $menupieces.length; i++){
              $menupieces[i].classList.remove('selected');
            }
            this.classList.add('selected');
          });
        }

        // menu activation
        for( let i=0 ; i< $hiddenbuttons.length; i++){
          $hiddenbuttons[i].addEventListener('click',function(e){
            $('hint-doghead').classList.remove('hint');// desactivate hint after click
            for(let i=0; i< $menupieces.length;i++){
              if(this.getAttribute('href') == $menupieces[i].getAttribute('href')){
                $menupieces[i].classList.add('active');
                for( let i=0 ; i< $menupieces.length; i++){
                  $menupieces[i].classList.remove('selected');
                }
                $menupieces[i].classList.add('selected');
              }
            }
          });
        }


      });



  </script>
</body>

</html>
